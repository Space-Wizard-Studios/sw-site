---
import Layout from '@layouts/PageLayout.astro';
import ProjectsGallery from '@widgets/Portfolio/ProjectsGallery/ProjectsGallery.astro';
import { getAllProjects, type ProcessedProject } from '@helpers/projectHelpers';

import { config } from '@config.js';
import type { MetaSEO } from 'types/metaseo';

// Get all projects for debugging
const projects = await getAllProjects('pt');
console.log(
    'Projects:',
    projects.map((p: ProcessedProject) => p.slug),
);

const meta: MetaSEO = {
    title: config.title,
    description: config.description,
    canonical: Astro.url.toString(),
    og: {
        type: 'website',
    },
};
---

<Layout meta={meta}>
    <section class='flex flex-col w-full relative'>
        <div class='sw-container flex flex-col space-y-10'>
            <div class='flex flex-col py-8 space-y-4'>
                <header class='flex flex-col space-y-2'>
                    <h2 class='uppercase text-on-surface'>Projetos</h2>
                    <h3 class='sw-text-gradient from-primary to-accent'>Um gostinho do que fazemos</h3>
                </header>
                <ProjectsGallery projects={projects} />
            </div>
        </div>
    </section>
</Layout>
