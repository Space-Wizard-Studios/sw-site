---
import { SEO } from 'astro-seo';

import type { MetaSEO } from 'types/metaSEO';
import { config } from '@config.js';

const {
    title = config.name,
    description = config.description,
    canonical,
    robots = {
        noindex: false,
        nofollow: false,
    },
    og = {
        title: title,
        image: config.defaultImage,
        type: 'website',
    },
} = Astro.props as MetaSEO;
---

<meta charset='UTF-8' />
<meta name='viewport' content='width=device-width, initial-scale=1.0' />
<link rel='icon' href='/favicon.svg' sizes='any' type='image/svg+xml' />
<link rel='sitemap' href='/sitemap-index.xml' />

<SEO
    canonical={title}
    title={''}
    description={description}
    noindex={robots.noindex}
    nofollow={robots.nofollow}
    languageAlternates={[]}
    openGraph={{
        basic: {
            title: og.title ?? '',
            image: og.image ?? '',
            type: og.type ?? '',
            url: canonical ?? '',
        },
        optional: {
            description: 'description',
            locale: 'locale',
            siteName: 'siteName',
        },
        image: {
            url: 'image',
            alt: 'title',
        },
    }}
/>

<!-- Google Site Verification -->
<meta name='google-site-verification' content={config.googleSiteVerificationId} />

<!-- Google Tag Manager -->
<google-tag data-gtag={config.googleTagId}></google-tag>

<noscript>
    <iframe
        src={'https://www.googletagmanager.com/ns.html?id=' + config.googleTagId}
        height='0'
        width='0'
        style='display:none;visibility:hidden;'
    >
    </iframe>
</noscript>

<script>
    class GTag extends HTMLElement {
        constructor() {
            super();
            const tag = this.dataset['gtag'];
            this.attachTagToWindow(window, tag);
        }

        attachTagToWindow(w: any, t: any) {
            w['tag'] = t;
        }
    }
    customElements.define('google-tag', GTag);
</script>

<script type='text/partytown' src='/GoogleTagManager.js' is:inline></script>
